{"ast":null,"code":"const tokenHeader = \"x-csrf\";\nconst serviceUri = \"http://localhost:5000\";\n\nconst tokenManager = require('./authToken');\n\nconst api = {\n  get: path => {\n    let token = sessionStorage.getItem(tokenHeader);\n    const url = `${serviceUri}${path}`;\n    return fetch(url, {\n      method: 'GET',\n      credentials: 'include',\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/json',\n        'x-csrf': token\n      }\n    }).then(res => {\n      console.log('token header');\n      console.log(res.headers.get(tokenHeader));\n      const resTok = res.headers.get(tokenHeader);\n\n      if (resTok) {\n        token = resTok;\n        tokenManager.set(token);\n      }\n\n      return res.json();\n    }).then(json => {\n      return json;\n    }).catch(err => {\n      console.log(err);\n    });\n  },\n  post: (path, data) => {\n    let token = sessionStorage.getItem(tokenHeader);\n    const url = `${serviceUri}${path}`;\n    return fetch(url, {\n      method: 'POST',\n      credentials: 'include',\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/json',\n        'x-csrf': token\n      },\n      body: JSON.stringify(data)\n    }).then(res => {\n      console.log('token header');\n      console.log(res.headers.get(tokenHeader));\n      const resTok = res.headers.get(tokenHeader);\n\n      if (resTok) {\n        token = resTok;\n        tokenManager.set(token);\n      }\n\n      return res.json();\n    }).then(json => {\n      return json;\n    }).catch(err => {\n      console.log(err);\n    });\n  },\n  patch: (path, data) => {\n    let token = sessionStorage.getItem(tokenHeader);\n    const url = `${serviceUri}${path}`;\n    return fetch(url, {\n      method: 'PATCH',\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json',\n        'x-csrf': token\n      },\n      body: JSON.stringify(data)\n    }).then(res => {\n      const resTok = res.headers.get(tokenHeader);\n\n      if (resTok) {\n        token = resTok;\n        tokenManager.set(token);\n      }\n\n      return res.json();\n    }).then(json => {\n      return json;\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n};\nexport default api;","map":{"version":3,"sources":["/Users/doscorch/Desktop/cs744 project/healthcare/client/src/serviceClient/apiClient.js"],"names":["tokenHeader","serviceUri","tokenManager","require","api","get","path","token","sessionStorage","getItem","url","fetch","method","credentials","mode","headers","then","res","console","log","resTok","set","json","catch","err","post","data","body","JSON","stringify","patch"],"mappings":"AAAA,MAAMA,WAAW,GAAG,QAApB;AACA,MAAMC,UAAU,GAAG,uBAAnB;;AACA,MAAMC,YAAY,GAAGC,OAAO,CAAC,aAAD,CAA5B;;AACA,MAAMC,GAAG,GAAG;AACRC,EAAAA,GAAG,EAAGC,IAAD,IAAU;AACX,QAAIC,KAAK,GAAGC,cAAc,CAACC,OAAf,CAAuBT,WAAvB,CAAZ;AACA,UAAMU,GAAG,GAAI,GAAET,UAAW,GAAEK,IAAK,EAAjC;AACA,WAAOK,KAAK,CAACD,GAAD,EAAM;AACdE,MAAAA,MAAM,EAAE,KADM;AAEdC,MAAAA,WAAW,EAAE,SAFC;AAGdC,MAAAA,IAAI,EAAE,MAHQ;AAIdC,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAEL,kBAAUR;AAFL;AAJK,KAAN,CAAL,CAQJS,IARI,CAQCC,GAAG,IAAI;AACXC,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACF,OAAJ,CAAYV,GAAZ,CAAgBL,WAAhB,CAAZ;AACA,YAAMoB,MAAM,GAAGH,GAAG,CAACF,OAAJ,CAAYV,GAAZ,CAAgBL,WAAhB,CAAf;;AACA,UAAIoB,MAAJ,EAAY;AACRb,QAAAA,KAAK,GAAGa,MAAR;AACAlB,QAAAA,YAAY,CAACmB,GAAb,CAAiBd,KAAjB;AACH;;AACD,aAAOU,GAAG,CAACK,IAAJ,EAAP;AACH,KAjBM,EAiBJN,IAjBI,CAiBCM,IAAI,IAAI;AACZ,aAAOA,IAAP;AACH,KAnBM,EAmBJC,KAnBI,CAmBEC,GAAG,IAAI;AACZN,MAAAA,OAAO,CAACC,GAAR,CAAYK,GAAZ;AACH,KArBM,CAAP;AAsBH,GA1BO;AA2BRC,EAAAA,IAAI,EAAE,CAACnB,IAAD,EAAOoB,IAAP,KAAgB;AAClB,QAAInB,KAAK,GAAGC,cAAc,CAACC,OAAf,CAAuBT,WAAvB,CAAZ;AACA,UAAMU,GAAG,GAAI,GAAET,UAAW,GAAEK,IAAK,EAAjC;AACA,WAAOK,KAAK,CAACD,GAAD,EAAM;AACdE,MAAAA,MAAM,EAAE,MADM;AAEdC,MAAAA,WAAW,EAAE,SAFC;AAGdC,MAAAA,IAAI,EAAE,MAHQ;AAIdC,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAEL,kBAAUR;AAFL,OAJK;AAQdoB,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeH,IAAf;AARQ,KAAN,CAAL,CASJV,IATI,CASCC,GAAG,IAAI;AACXC,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACF,OAAJ,CAAYV,GAAZ,CAAgBL,WAAhB,CAAZ;AACA,YAAMoB,MAAM,GAAGH,GAAG,CAACF,OAAJ,CAAYV,GAAZ,CAAgBL,WAAhB,CAAf;;AACA,UAAIoB,MAAJ,EAAY;AACRb,QAAAA,KAAK,GAAGa,MAAR;AACAlB,QAAAA,YAAY,CAACmB,GAAb,CAAiBd,KAAjB;AACH;;AAED,aAAOU,GAAG,CAACK,IAAJ,EAAP;AACH,KAnBM,EAmBJN,IAnBI,CAmBCM,IAAI,IAAI;AACZ,aAAOA,IAAP;AACH,KArBM,EAqBJC,KArBI,CAqBEC,GAAG,IAAI;AACZN,MAAAA,OAAO,CAACC,GAAR,CAAYK,GAAZ;AACH,KAvBM,CAAP;AAwBH,GAtDO;AAuDRM,EAAAA,KAAK,EAAE,CAACxB,IAAD,EAAOoB,IAAP,KAAgB;AACnB,QAAInB,KAAK,GAAGC,cAAc,CAACC,OAAf,CAAuBT,WAAvB,CAAZ;AACA,UAAMU,GAAG,GAAI,GAAET,UAAW,GAAEK,IAAK,EAAjC;AACA,WAAOK,KAAK,CAACD,GAAD,EAAM;AACdE,MAAAA,MAAM,EAAE,OADM;AAEdC,MAAAA,WAAW,EAAE,SAFC;AAGdE,MAAAA,OAAO,EAAE;AACL,wBAAgB,kBADX;AAEL,kBAAUR;AAFL,OAHK;AAOdoB,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeH,IAAf;AAPQ,KAAN,CAAL,CAQJV,IARI,CAQCC,GAAG,IAAI;AACX,YAAMG,MAAM,GAAGH,GAAG,CAACF,OAAJ,CAAYV,GAAZ,CAAgBL,WAAhB,CAAf;;AACA,UAAIoB,MAAJ,EAAY;AACRb,QAAAA,KAAK,GAAGa,MAAR;AACAlB,QAAAA,YAAY,CAACmB,GAAb,CAAiBd,KAAjB;AACH;;AAED,aAAOU,GAAG,CAACK,IAAJ,EAAP;AACH,KAhBM,EAgBJN,IAhBI,CAgBCM,IAAI,IAAI;AACZ,aAAOA,IAAP;AACH,KAlBM,EAkBJC,KAlBI,CAkBEC,GAAG,IAAI;AACZN,MAAAA,OAAO,CAACC,GAAR,CAAYK,GAAZ;AACH,KApBM,CAAP;AAqBH;AA/EO,CAAZ;AAkFA,eAAepB,GAAf","sourcesContent":["const tokenHeader = \"x-csrf\";\nconst serviceUri = \"http://localhost:5000\";\nconst tokenManager = require('./authToken');\nconst api = {\n    get: (path) => {\n        let token = sessionStorage.getItem(tokenHeader);\n        const url = `${serviceUri}${path}`;\n        return fetch(url, {\n            method: 'GET',\n            credentials: 'include',\n            mode: 'cors',\n            headers: {\n                'Content-Type': 'application/json',\n                'x-csrf': token,\n            },\n        }).then(res => {\n            console.log('token header');\n            console.log(res.headers.get(tokenHeader));\n            const resTok = res.headers.get(tokenHeader);\n            if (resTok) {\n                token = resTok;\n                tokenManager.set(token);\n            }\n            return res.json();\n        }).then(json => {\n            return json\n        }).catch(err => {\n            console.log(err);\n        });\n    },\n    post: (path, data) => {\n        let token = sessionStorage.getItem(tokenHeader);\n        const url = `${serviceUri}${path}`;\n        return fetch(url, {\n            method: 'POST',\n            credentials: 'include',\n            mode: 'cors',\n            headers: {\n                'Content-Type': 'application/json',\n                'x-csrf': token,\n            },\n            body: JSON.stringify(data),\n        }).then(res => {\n            console.log('token header');\n            console.log(res.headers.get(tokenHeader));\n            const resTok = res.headers.get(tokenHeader);\n            if (resTok) {\n                token = resTok;\n                tokenManager.set(token);\n            }\n\n            return res.json();\n        }).then(json => {\n            return json\n        }).catch(err => {\n            console.log(err);\n        });\n    },\n    patch: (path, data) => {\n        let token = sessionStorage.getItem(tokenHeader);\n        const url = `${serviceUri}${path}`;\n        return fetch(url, {\n            method: 'PATCH',\n            credentials: 'include',\n            headers: {\n                'Content-Type': 'application/json',\n                'x-csrf': token,\n            },\n            body: JSON.stringify(data),\n        }).then(res => {\n            const resTok = res.headers.get(tokenHeader);\n            if (resTok) {\n                token = resTok;\n                tokenManager.set(token);\n            }\n\n            return res.json();\n        }).then(json => {\n            return json\n        }).catch(err => {\n            console.log(err);\n        });\n    },\n};\n\nexport default api;"]},"metadata":{},"sourceType":"module"}