(this["webpackJsonphealthcare-client"]=this["webpackJsonphealthcare-client"]||[]).push([[0],{380:function(e,t,a){e.exports=a(480)},385:function(e,t,a){},420:function(e,t,a){},480:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(16),c=a.n(s),o=(a(385),a(28)),i=a.n(o),u=a(57),l=a(83),m=a(84),p=a(88),h=a(87),f=a(515),d=a(516),v=a(157),g=a(31),E=a(99),b=a(520),y=a(327),w=a(326),x=a(504),O=a(503),j=a(501),k=a(100),N=a(517),C=a(258),S=a.n(C),_=a(363),A=a.n(_),D=S()(),F=A()("http://localhost:3030");D.configure(F.fetch(window.fetch)),D.configure(S.a.authentication({storage:window.localStorage}));var I=D,L=I.service("users"),T=function(){var e=Object(u.a)(i.a.mark((function e(t,a,r,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.create({username:t,password:a,firstName:r,lastName:n,userRole:"patient"},{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a,r,n){return e.apply(this,arguments)}}(),U=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L.find().then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L.find({query:{username:t}}).then((function(e){return e.data.length?e.data[0]:void 0})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.patch(t._id,t,{});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(u.a)(i.a.mark((function e(t,a){var r,n,s,c,o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t||a){e.next=8;break}return e.next=4,I.reAuthenticate();case 4:return s=e.sent,e.abrupt("return",{userId:null===(r=s.user)||void 0===r?void 0:r._id,username:null===(n=s.user)||void 0===n?void 0:n.username,error:!1});case 8:return e.next=10,I.authenticate({strategy:"local",username:t,password:a});case 10:return c=e.sent,e.abrupt("return",{user:c.user,error:!1});case 12:e.next=19;break;case 14:return e.prev=14,e.t0=e.catch(0),console.log(e.t0),u=null!==(o=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==o?o:"something is not working right :(",e.abrupt("return",{error:u});case 19:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.logout();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=a(69),J=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={username:"",password:"",error:""},e.login=function(){var t=Object(u.a)(i.a.mark((function t(a){var r,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,W(e.state.username);case 3:if(r=t.sent){t.next=8;break}e.setState({error:"invalid login"}),t.next=16;break;case 8:if(r.isActive||"undefined"===typeof r.isActive){t.next=12;break}e.setState({error:"This account is no longer active. Contact staff."}),t.next=16;break;case 12:return t.next=14,q(e.state.username,e.state.password);case 14:(n=t.sent).error?e.setState({error:n.error}):(e.props.app_login(n.user),e.props.history.push("/"));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changeForm=function(t){var a=t.target.name,r=t.target.value,n=Object(E.a)({},e.state);n[a]=r,e.setState(n)},e}return Object(m.a)(a,[{key:"render",value:function(){var e={paper:{marginTop:"10px",display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:"10px"},submit:{margin:"10px"}},t=this.state.error?n.a.createElement(N.a,{severity:"error"},this.state.error):"";return n.a.createElement(j.a,{component:"main",maxWidth:"xs"},n.a.createElement("div",{style:e.paper},n.a.createElement(b.a,null),n.a.createElement(k.a,{component:"h1",variant:"h5"},"Login"),n.a.createElement("form",{style:e.form,noValidate:!0},n.a.createElement(w.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,onChange:this.changeForm,value:this.state.username}),n.a.createElement(w.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:this.changeForm,value:this.state.password}),n.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",style:e.submit,onClick:this.login},"Log In"),n.a.createElement(O.a,{container:!0,justify:"center"},n.a.createElement(x.a,{href:"/register"},"Don't have an account? Sign Up"))),t))}}]),a}(n.a.Component),V={app_login:function(e){return{type:"LOGIN",user:e}}},X=Object(G.b)((function(e){return{user:e.user}}),V)(J),H={username:"",password:"",firstName:"",lastName:"",error:"",success:""},P=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state=Object(E.a)({},H),e.registerUser=function(){var t=Object(u.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),e.state.username){t.next=4;break}return e.setState({error:"please provide username"}),t.abrupt("return");case 4:if(e.state.password){t.next=7;break}return e.setState({error:"please provide password"}),t.abrupt("return");case 7:return t.next=9,T(e.state.username,e.state.password,e.state.firstName,e.state.lastName);case 9:e.setState(Object(E.a)(Object(E.a)({},H),{},{success:"user successfully created.. please login"}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changeForm=function(t){var a=t.target.name,r=t.target.value,n=Object(E.a)({},e.state);n[a]=r,e.setState(n)},e}return Object(m.a)(a,[{key:"render",value:function(){var e={paper:{marginTop:"10px",display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:"10px"},submit:{margin:"10px"}},t=this.state.error?n.a.createElement(N.a,{severity:"error"},this.state.error):"",a=this.state.success?n.a.createElement(N.a,{severity:"success"},this.state.success):"";return n.a.createElement(j.a,{component:"main",maxWidth:"xs"},n.a.createElement("div",{style:e.paper},n.a.createElement(b.a,null),n.a.createElement(k.a,{component:"h1",variant:"h5"},"Register"),n.a.createElement("form",{style:e.form,noValidate:!0},n.a.createElement(O.a,{container:!0,spacing:2},n.a.createElement(O.a,{item:!0,xs:12,sm:6},n.a.createElement(w.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,value:this.state.firstName,onChange:this.changeForm})),n.a.createElement(O.a,{item:!0,xs:12,sm:6},n.a.createElement(w.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",value:this.state.lastName,onChange:this.changeForm})),n.a.createElement(O.a,{item:!0,xs:12},n.a.createElement(w.a,{variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"username",name:"username",autoComplete:"username",value:this.state.username,onChange:this.changeForm})),n.a.createElement(O.a,{item:!0,xs:12},n.a.createElement(w.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:this.changeForm}))),n.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",style:e.submit,onClick:this.registerUser},"Register"),n.a.createElement(O.a,{container:!0,justify:"center"},n.a.createElement(O.a,{item:!0},n.a.createElement(x.a,{href:"/login"},"Already have an account? Login")))),t,a))}}]),a}(n.a.Component),z=(a(420),a(254)),M=a.n(z),$=a(257),K=a(331),Q=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={users:[]},e.getData=function(){return U().then((function(t){e.setState({users:t})}))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=r.createRef();return r.createElement(M.a,{tableRef:t,options:{sorting:!0,search:!0,paging:!1},title:"Users",columns:[{title:"Username",field:"username",editable:!1},{title:"First Name",field:"firstName"},{title:"Last Name",field:"lastName"},{title:"User Role",field:"userRole",editComponent:function(e){return r.createElement($.a,{id:"userrole",value:e.value||!1,onChange:function(t){return e.onChange(t.target.value)}},r.createElement(K.a,{value:"physician"},"physician"),r.createElement(K.a,{value:"patient"},"patient"),r.createElement(K.a,{value:"admin"},"admin"))}},{title:"Is Active",field:"isActive",render:function(e){return r.createElement("span",null,String("undefined"===typeof e.isActive||e.isActive))},editComponent:function(e){return r.createElement($.a,{id:"isActive",value:"undefined"===typeof e.value||e.value,onChange:function(t){return e.onChange(t.target.value)}},r.createElement(K.a,{value:!0},"true"),r.createElement(K.a,{value:!1},"false"))}}],data:this.state.users,editable:{onRowUpdate:function(t,a){return R(t).then((function(t){return e.getData()}))}}})}}]),a}(r.Component),Y=a(512),Z=a(513),ee=a(514),te=a(519),ae=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={enrollments:[],programs:[]},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.user;return n.a.createElement(Y.a,{fluid:!0},n.a.createElement(Z.a,null,n.a.createElement(ee.a,null,n.a.createElement(te.a,{bg:"light",style:{padding:"10px"}},n.a.createElement(Z.a,null,n.a.createElement(ee.a,null,n.a.createElement("h4",null,"Account Information"),n.a.createElement("hr",null),n.a.createElement("h6",null,"First Name"),n.a.createElement("p",null,e.firstName),n.a.createElement("h6",null,"Last Name"),n.a.createElement("p",null,e.lastName),n.a.createElement("h6",null,"Username"),n.a.createElement("p",null,e.username),n.a.createElement("h6",null,"Account Type"),n.a.createElement("p",null,e.userRole)))))))}}]),a}(n.a.Component),re=Object(G.b)((function(e){return{user:e.user}}),{})(ae),ne=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).clickLogout=function(){var t=Object(u.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,B();case 3:e.props.app_logout(),e.props.history.push("/");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(m.a)(a,[{key:"render",value:function(){Boolean(this.props.user._id),this.props.user.userRole;return n.a.createElement("div",null,n.a.createElement(f.a,{sticky:"top",bg:"dark",variant:"dark",expand:"lg",style:{marginBottom:"10px"}},n.a.createElement(f.a.Brand,{as:v.b,to:"/"},n.a.createElement("img",{style:{width:"30px",height:"30px"},src:"../logo.png",alt:"logo"})," Healthcare System"),n.a.createElement(f.a.Toggle,{"aria-controls":"basic-navbar-nav"}),n.a.createElement(f.a.Collapse,{id:"basic-navbar-nav"},n.a.createElement(d.a,{className:"mr-auto"}),n.a.createElement(d.a,null))),n.a.createElement(g.a,{exact:!0,path:"/",component:se}),n.a.createElement(g.a,{exact:!0,path:"/home",component:se}),n.a.createElement(g.a,{path:"/login",component:X}),n.a.createElement(g.a,{path:"/register",component:P}),n.a.createElement(g.a,{path:"/account",component:re}),n.a.createElement(g.a,{path:"/user-manager",component:Q}))}}]),a}(n.a.Component);function se(){return n.a.createElement("div",{className:"container",style:{backgroundColor:"darkgrey"}},n.a.createElement("div",{class:"row"},n.a.createElement("div",{style:{margin:"auto",marginBottom:"20px"}},n.a.createElement("img",{src:"../logo.png",alt:"home image",style:{width:"100px"}}),n.a.createElement("span",{style:{fontSize:"3em"}}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"card card-body bg-light",style:{height:"300px"}},n.a.createElement("span",null,"Welcome to the Healthcare application."))))}var ce={app_logout:function(e){return{type:"LOGOUT"}}},oe=Object(G.b)((function(e){return{user:e.user}}),ce)(Object(g.e)(ne));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ie=a(70),ue=function(){var e=sessionStorage.getItem("user");return e&&(e=JSON.parse(e)),e||{}},le=function(e,t){switch(t.type){case"LOGIN":return Object(E.a)({},t.user);case"LOGOUT":return{};default:return e}},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue(),t=arguments.length>1?arguments[1]:void 0;return e=le(e,t),sessionStorage.setItem("user",JSON.stringify(e)),e},pe=Object(ie.c)({user:me}),he=Object(ie.e)(pe,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(n.a.createElement(G.a,{store:he},n.a.createElement(v.a,null,n.a.createElement(oe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[380,1,2]]]);
//# sourceMappingURL=main.6788869e.chunk.js.map