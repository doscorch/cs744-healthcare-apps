{"ast":null,"code":"import { ERROR } from \"../errorHandling\";\nimport client from \"../serviceClient/apiClient\";\nconst users = {}; // call api to register user\n\n/**\n * \n * @param {String} username \n * @param {String} password \n * @param {String} firstName - TODO: refactor name\n * @param {String} lastName - TODO: refactor name\n * @param {String} user_type - admin, patient, physician only \n * @param {String} security_answer_1 \n * @param {String} security_answer_2 \n * @param {String} security_answer_3 \n * @param {Integer} security_question_1 \n * @param {Integer} security_question_2 \n * @param {Integer} security_question_3 \n * @param {String} address \n * @param {String} date_of_birth \n * @param {String} license_number\n * \n * @return {object} - contains msg property. If msg is null, there was a success. If msg is not null, it contains an error message\n */\n\nexport const registerUser = async (username, password, firstName, lastName, user_type, security_answer_1, security_answer_2, security_answer_3, security_question_1, security_question_2, security_question_3, address, date_of_birth, license_number) => {\n  let args = {\n    username,\n    password,\n    firstName,\n    lastName,\n    user_type,\n    security_question_1,\n    security_answer_1,\n    security_question_2,\n    security_answer_2,\n    security_question_3,\n    security_answer_3,\n    address,\n    date_of_birth,\n    license_number\n  };\n  return client.post('/auth/register', args).then(res => {\n    return {\n      msg: res.msg\n    };\n  });\n};\nexport const updatePassword = async (username, password) => {\n  let args = {\n    username,\n    password\n  };\n  return client.post('/auth/updatePassword', args).then(res => {\n    return {\n      msg: res.msg\n    };\n  });\n};\nexport const updateSecurityQuestions = async (username, security_question_1, security_answer_1, security_question_2, security_answer_2, security_question_3, security_answer_3) => {\n  let args = {\n    username,\n    security_question_1,\n    security_answer_1,\n    security_question_2,\n    security_answer_2,\n    security_question_3,\n    security_answer_3\n  };\n  return client.post('/auth/updateSecurityQuestions', args).then(res => {\n    return {\n      msg: res.msg\n    };\n  });\n};\n/**\n * Gets all security questions\n */\n\nexport const getAllSecurityQuestions = async () => {\n  return client.get('/auth/getSecurityQuestions').then(res => {\n    return {\n      data: res.data\n    };\n  });\n}; // call api to get users\n\nexport const getUsers = async () => {\n  return client.get('/users').then(users => {\n    return users;\n  });\n};\nexport const getQuestions = async user => {\n  const response = await client.get('/auth/questions/' + user.user_id);\n  return response.questions;\n}; //call api to check security question answer\n\nexport const answerSecurityQuestion = async (user, answer) => {\n  let response = client.post('/auth/answerquestion', {\n    user: user,\n    answer: answer\n  });\n  return response;\n}; // call api to register user by username\n\nexport const getUser = async username => {\n  client.get(`/users/${username}`).then(user => {\n    return user;\n  });\n  return users.find({\n    query: {\n      username: username\n    }\n  }).then(u => u.data.length ? u.data[0] : undefined);\n}; // call api to update user\n\nexport const updateUser = async user => {// await users.update(user._id, user, {});\n}; // call api to patch user\n\nexport const patchUser = async (userId, userPartial) => {\n  return await client.patch(`/users/${userId}`, userPartial);\n}; // call api to login user\n\nexport const loginUser = async (username, password) => {\n  try {\n    if (!username && !password) {\n      var _auth$user, _auth$user2;\n\n      let auth = await client.reAuthenticate();\n      return {\n        userId: (_auth$user = auth.user) === null || _auth$user === void 0 ? void 0 : _auth$user._id,\n        username: (_auth$user2 = auth.user) === null || _auth$user2 === void 0 ? void 0 : _auth$user2.username,\n        error: false\n      };\n    } else {\n      return client.post('/auth/login', {\n        username,\n        password\n      }).then(res => {\n        return {\n          user: res.data,\n          msg: res.msg\n        };\n      });\n    }\n  } catch (error) {\n    var _error$message;\n\n    let message = (_error$message = error === null || error === void 0 ? void 0 : error.message) !== null && _error$message !== void 0 ? _error$message : ERROR;\n    return {\n      error: message\n    };\n  }\n}; // logout user on client\n\nexport const logout = async () => {\n  return await client.post('/auth/logout');\n};","map":{"version":3,"sources":["/Users/doscorch/Desktop/cs744 project/pharmacy/client/src/auth/usersService.js"],"names":["ERROR","client","users","registerUser","username","password","firstName","lastName","user_type","security_answer_1","security_answer_2","security_answer_3","security_question_1","security_question_2","security_question_3","address","date_of_birth","license_number","args","post","then","res","msg","updatePassword","updateSecurityQuestions","getAllSecurityQuestions","get","data","getUsers","getQuestions","user","response","user_id","questions","answerSecurityQuestion","answer","getUser","find","query","u","length","undefined","updateUser","patchUser","userId","userPartial","patch","loginUser","auth","reAuthenticate","_id","error","message","logout"],"mappings":"AACA,SAASA,KAAT,QAAsB,kBAAtB;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AAEA,MAAMC,KAAK,GAAG,EAAd,C,CACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,YAAY,GAAG,OAAOC,QAAP,EAAiBC,QAAjB,EAA2BC,SAA3B,EAAsCC,QAAtC,EACxBC,SADwB,EACbC,iBADa,EACMC,iBADN,EACyBC,iBADzB,EAExBC,mBAFwB,EAEHC,mBAFG,EAEkBC,mBAFlB,EAGxBC,OAHwB,EAGfC,aAHe,EAGAC,cAHA,KAGmB;AAC3C,MAAIC,IAAI,GAAG;AACPd,IAAAA,QADO;AAEPC,IAAAA,QAFO;AAGPC,IAAAA,SAHO;AAIPC,IAAAA,QAJO;AAKPC,IAAAA,SALO;AAOPI,IAAAA,mBAPO;AAQPH,IAAAA,iBARO;AASPI,IAAAA,mBATO;AAUPH,IAAAA,iBAVO;AAWPI,IAAAA,mBAXO;AAYPH,IAAAA,iBAZO;AAcPI,IAAAA,OAdO;AAePC,IAAAA,aAfO;AAgBPC,IAAAA;AAhBO,GAAX;AAmBA,SAAOhB,MAAM,CAACkB,IAAP,CAAY,gBAAZ,EAA8BD,IAA9B,EAAoCE,IAApC,CAAyCC,GAAG,IAAI;AACnD,WAAO;AACHC,MAAAA,GAAG,EAAED,GAAG,CAACC;AADN,KAAP;AAGH,GAJM,CAAP;AAKH,CA5BM;AA8BP,OAAO,MAAMC,cAAc,GAAG,OAAOnB,QAAP,EAAiBC,QAAjB,KAA8B;AACxD,MAAIa,IAAI,GAAG;AAACd,IAAAA,QAAD;AAAWC,IAAAA;AAAX,GAAX;AACA,SAAOJ,MAAM,CAACkB,IAAP,CAAY,sBAAZ,EAAoCD,IAApC,EAA0CE,IAA1C,CAA+CC,GAAG,IAAI;AACzD,WAAO;AACHC,MAAAA,GAAG,EAAED,GAAG,CAACC;AADN,KAAP;AAGH,GAJM,CAAP;AAKH,CAPM;AASP,OAAO,MAAME,uBAAuB,GAAG,OAAMpB,QAAN,EAAgBQ,mBAAhB,EAAqCH,iBAArC,EACnCI,mBADmC,EACdH,iBADc,EACKI,mBADL,EAC0BH,iBAD1B,KACgD;AAC/E,MAAIO,IAAI,GAAG;AAACd,IAAAA,QAAD;AAAWQ,IAAAA,mBAAX;AAAgCH,IAAAA,iBAAhC;AACPI,IAAAA,mBADO;AACcH,IAAAA,iBADd;AACiCI,IAAAA,mBADjC;AACsDH,IAAAA;AADtD,GAAX;AAEI,SAAOV,MAAM,CAACkB,IAAP,CAAY,+BAAZ,EAA6CD,IAA7C,EAAmDE,IAAnD,CAAwDC,GAAG,IAAI;AAClE,WAAO;AACHC,MAAAA,GAAG,EAAED,GAAG,CAACC;AADN,KAAP;AAGH,GAJM,CAAP;AAKP,CATE;AAWP;AACA;AACA;;AACA,OAAO,MAAMG,uBAAuB,GAAG,YAAY;AAC/C,SAAOxB,MAAM,CAACyB,GAAP,CAAW,4BAAX,EAAyCN,IAAzC,CAA8CC,GAAG,IAAI;AACxD,WAAO;AACHM,MAAAA,IAAI,EAAEN,GAAG,CAACM;AADP,KAAP;AAGH,GAJM,CAAP;AAKH,CANM,C,CAQP;;AACA,OAAO,MAAMC,QAAQ,GAAG,YAAY;AAChC,SAAO3B,MAAM,CAACyB,GAAP,CAAW,QAAX,EAAqBN,IAArB,CAA0BlB,KAAK,IAAI;AACtC,WAAOA,KAAP;AACH,GAFM,CAAP;AAGH,CAJM;AAMP,OAAO,MAAM2B,YAAY,GAAG,MAAOC,IAAP,IAAgB;AACxC,QAAMC,QAAQ,GAAG,MAAM9B,MAAM,CAACyB,GAAP,CAAW,qBAAqBI,IAAI,CAACE,OAArC,CAAvB;AACA,SAAOD,QAAQ,CAACE,SAAhB;AACH,CAHM,C,CAKP;;AACA,OAAO,MAAMC,sBAAsB,GAAG,OAAOJ,IAAP,EAAaK,MAAb,KAAwB;AAC1D,MAAIJ,QAAQ,GAAG9B,MAAM,CAACkB,IAAP,CAAY,sBAAZ,EACf;AACIW,IAAAA,IAAI,EAAEA,IADV;AAEIK,IAAAA,MAAM,EAAEA;AAFZ,GADe,CAAf;AAKA,SAAOJ,QAAP;AACH,CAPM,C,CASP;;AACA,OAAO,MAAMK,OAAO,GAAG,MAAOhC,QAAP,IAAoB;AACvCH,EAAAA,MAAM,CAACyB,GAAP,CAAY,UAAStB,QAAS,EAA9B,EAAiCgB,IAAjC,CAAsCU,IAAI,IAAI;AAC1C,WAAOA,IAAP;AACH,GAFD;AAGA,SAAO5B,KAAK,CAACmC,IAAN,CAAW;AACdC,IAAAA,KAAK,EAAE;AACHlC,MAAAA,QAAQ,EAAEA;AADP;AADO,GAAX,EAIJgB,IAJI,CAICmB,CAAC,IAAIA,CAAC,CAACZ,IAAF,CAAOa,MAAP,GAAgBD,CAAC,CAACZ,IAAF,CAAO,CAAP,CAAhB,GAA4Bc,SAJlC,CAAP;AAKH,CATM,C,CAWP;;AACA,OAAO,MAAMC,UAAU,GAAG,MAAOZ,IAAP,IAAgB,CACtC;AACH,CAFM,C,CAIP;;AACA,OAAO,MAAMa,SAAS,GAAG,OAAOC,MAAP,EAAeC,WAAf,KAA+B;AACpD,SAAO,MAAM5C,MAAM,CAAC6C,KAAP,CAAc,UAASF,MAAO,EAA9B,EAAiCC,WAAjC,CAAb;AACH,CAFM,C,CAIP;;AACA,OAAO,MAAME,SAAS,GAAG,OAAO3C,QAAP,EAAiBC,QAAjB,KAA8B;AACnD,MAAI;AACA,QAAI,CAACD,QAAD,IAAa,CAACC,QAAlB,EAA4B;AAAA;;AACxB,UAAI2C,IAAI,GAAG,MAAM/C,MAAM,CAACgD,cAAP,EAAjB;AACA,aAAO;AACHL,QAAAA,MAAM,gBAAEI,IAAI,CAAClB,IAAP,+CAAE,WAAWoB,GADhB;AAEH9C,QAAAA,QAAQ,iBAAE4C,IAAI,CAAClB,IAAP,gDAAE,YAAW1B,QAFlB;AAGH+C,QAAAA,KAAK,EAAE;AAHJ,OAAP;AAKH,KAPD,MAOO;AACH,aAAOlD,MAAM,CAACkB,IAAP,CAAY,aAAZ,EAA2B;AAAEf,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,OAA3B,EAAmDe,IAAnD,CAAwDC,GAAG,IAAI;AAClE,eAAO;AACHS,UAAAA,IAAI,EAAET,GAAG,CAACM,IADP;AAEHL,UAAAA,GAAG,EAAED,GAAG,CAACC;AAFN,SAAP;AAIH,OALM,CAAP;AAMH;AACJ,GAhBD,CAgBE,OAAO6B,KAAP,EAAc;AAAA;;AACZ,QAAIC,OAAO,qBAAGD,KAAH,aAAGA,KAAH,uBAAGA,KAAK,CAAEC,OAAV,2DAAqBpD,KAAhC;AACA,WAAO;AACHmD,MAAAA,KAAK,EAAEC;AADJ,KAAP;AAGH;AACJ,CAvBM,C,CAyBP;;AACA,OAAO,MAAMC,MAAM,GAAG,YAAY;AAC9B,SAAO,MAAMpD,MAAM,CAACkB,IAAP,CAAY,cAAZ,CAAb;AACH,CAFM","sourcesContent":["\nimport { ERROR } from \"../errorHandling\";\nimport client from \"../serviceClient/apiClient\";\n\nconst users = {};\n// call api to register user\n\n/**\n * \n * @param {String} username \n * @param {String} password \n * @param {String} firstName - TODO: refactor name\n * @param {String} lastName - TODO: refactor name\n * @param {String} user_type - admin, patient, physician only \n * @param {String} security_answer_1 \n * @param {String} security_answer_2 \n * @param {String} security_answer_3 \n * @param {Integer} security_question_1 \n * @param {Integer} security_question_2 \n * @param {Integer} security_question_3 \n * @param {String} address \n * @param {String} date_of_birth \n * @param {String} license_number\n * \n * @return {object} - contains msg property. If msg is null, there was a success. If msg is not null, it contains an error message\n */\nexport const registerUser = async (username, password, firstName, lastName,\n    user_type, security_answer_1, security_answer_2, security_answer_3,\n    security_question_1, security_question_2, security_question_3,\n    address, date_of_birth, license_number) => {\n    let args = {\n        username,\n        password,\n        firstName,\n        lastName,\n        user_type,\n\n        security_question_1,\n        security_answer_1,\n        security_question_2,\n        security_answer_2,\n        security_question_3,\n        security_answer_3,\n\n        address,\n        date_of_birth,\n        license_number\n    };\n\n    return client.post('/auth/register', args).then(res => {\n        return {\n            msg: res.msg,\n        };\n    });\n}\n\nexport const updatePassword = async (username, password) => {\n    let args = {username, password};\n    return client.post('/auth/updatePassword', args).then(res => {\n        return {\n            msg: res.msg,\n        };\n    });\n}\n\nexport const updateSecurityQuestions = async(username, security_question_1, security_answer_1, \n    security_question_2, security_answer_2, security_question_3, security_answer_3) => {\n        let args = {username, security_question_1, security_answer_1, \n            security_question_2, security_answer_2, security_question_3, security_answer_3};\n            return client.post('/auth/updateSecurityQuestions', args).then(res => {\n                return {\n                    msg: res.msg,\n                }\n            });\n    }\n\n/**\n * Gets all security questions\n */\nexport const getAllSecurityQuestions = async () => {\n    return client.get('/auth/getSecurityQuestions').then(res => {\n        return {\n            data: res.data\n        };\n    });\n}\n\n// call api to get users\nexport const getUsers = async () => {\n    return client.get('/users').then(users => {\n        return users;\n    })\n}\n\nexport const getQuestions = async (user) => {\n    const response = await client.get('/auth/questions/' + user.user_id);\n    return response.questions;\n}\n\n//call api to check security question answer\nexport const answerSecurityQuestion = async (user, answer) => {\n    let response = client.post('/auth/answerquestion', \n    {\n        user: user,\n        answer: answer\n    });\n    return response;\n}\n\n// call api to register user by username\nexport const getUser = async (username) => {\n    client.get(`/users/${username}`).then(user => {\n        return user;\n    })\n    return users.find({\n        query: {\n            username: username\n        }\n    }).then(u => u.data.length ? u.data[0] : undefined)\n}\n\n// call api to update user\nexport const updateUser = async (user) => {\n    // await users.update(user._id, user, {});\n}\n\n// call api to patch user\nexport const patchUser = async (userId, userPartial) => {\n    return await client.patch(`/users/${userId}`, userPartial);\n}\n\n// call api to login user\nexport const loginUser = async (username, password) => {\n    try {\n        if (!username && !password) {\n            let auth = await client.reAuthenticate();\n            return {\n                userId: auth.user?._id,\n                username: auth.user?.username,\n                error: false,\n            }\n        } else {\n            return client.post('/auth/login', { username, password }).then(res => {\n                return {\n                    user: res.data,\n                    msg: res.msg,\n                }\n            })\n        }\n    } catch (error) {\n        let message = error?.message ?? ERROR;\n        return {\n            error: message,\n        };\n    }\n}\n\n// logout user on client\nexport const logout = async () => {\n    return await client.post('/auth/logout');\n}\n\n"]},"metadata":{},"sourceType":"module"}