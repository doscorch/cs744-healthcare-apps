{"ast":null,"code":"import _objectSpread from\"/home/diedrick.nathan/cs744-healthcare-apps/healthcare/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/diedrick.nathan/cs744-healthcare-apps/healthcare/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/diedrick.nathan/cs744-healthcare-apps/healthcare/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/diedrick.nathan/cs744-healthcare-apps/healthcare/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/diedrick.nathan/cs744-healthcare-apps/healthcare/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/diedrick.nathan/cs744-healthcare-apps/healthcare/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/diedrick.nathan/cs744-healthcare-apps/healthcare/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Avatar from'@material-ui/core/Avatar';import Button from'@material-ui/core/Button';import TextField from'@material-ui/core/TextField';import Link from'@material-ui/core/Link';import Grid from'@material-ui/core/Grid';import Container from'@material-ui/core/Container';import Typography from'@material-ui/core/Typography';import Alert from'@material-ui/lab/Alert';import{getUser,loginUser}from'./usersService';import{connect}from'react-redux';import{app_login}from'../redux/actions/userActions';var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={username:\"\",password:\"\",error:\"\"};_this.login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var user,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();// get user from db\n_context.next=3;return getUser(_this.state.username);case 3:user=_context.sent;if(user){_context.next=8;break;}_this.setState({error:\"invalid login\"});_context.next=16;break;case 8:if(user.isActive||typeof user.isActive===\"undefined\"){_context.next=12;break;}// inactive users cant login!\n_this.setState({error:\"This account is no longer active. Contact staff.\"});_context.next=16;break;case 12:_context.next=14;return loginUser(_this.state.username,_this.state.password);case 14:res=_context.sent;if(res.error){_this.setState({error:res.error});}else{_this.props.app_login(res.user);_this.props.history.push('/');}case 16:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.changeForm=function(e){var propName=e.target.name;var propValue=e.target.value;var state=_objectSpread({},_this.state);state[propName]=propValue;_this.setState(state);};return _this;}_createClass(Login,[{key:\"render\",value:function render(){var classes={paper:{marginTop:\"10px\",display:'flex',flexDirection:'column',alignItems:'center'},form:{width:'100%',marginTop:\"10px\"},submit:{margin:\"10px\"}};var alert=this.state.error?/*#__PURE__*/React.createElement(Alert,{severity:\"error\"},this.state.error):\"\";return/*#__PURE__*/React.createElement(Container,{component:\"main\",maxWidth:\"xs\"},/*#__PURE__*/React.createElement(\"div\",{style:classes.paper},/*#__PURE__*/React.createElement(Avatar,null),/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Login\"),/*#__PURE__*/React.createElement(\"form\",{style:classes.form,noValidate:true},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"username\",label:\"Username\",name:\"username\",autoComplete:\"username\",autoFocus:true,onChange:this.changeForm,value:this.state.username}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"current-password\",onChange:this.changeForm,value:this.state.password}),/*#__PURE__*/React.createElement(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",style:classes.submit,onClick:this.login},\"Log In\"),/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"center\"},/*#__PURE__*/React.createElement(Link,{href:\"/register\"},\"Don't have an account? Sign Up\"))),alert));}}]);return Login;}(React.Component);var mapState=function mapState(state){return{user:state.user};};var mapDispatch={app_login:app_login};export default connect(mapState,mapDispatch)(Login);","map":{"version":3,"sources":["/home/diedrick.nathan/cs744-healthcare-apps/healthcare/client/src/auth/login.js"],"names":["React","Avatar","Button","TextField","Link","Grid","Container","Typography","Alert","getUser","loginUser","connect","app_login","Login","state","username","password","error","login","e","preventDefault","user","setState","isActive","res","props","history","push","changeForm","propName","target","name","propValue","value","classes","paper","marginTop","display","flexDirection","alignItems","form","width","submit","margin","alert","Component","mapState","mapDispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Link from '@material-ui/core/Link';\nimport Grid from '@material-ui/core/Grid';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport Alert from '@material-ui/lab/Alert';\n\nimport { getUser, loginUser } from './usersService';\nimport { connect } from 'react-redux';\nimport { app_login } from '../redux/actions/userActions'\n\nclass Login extends React.Component {\n    state = {\n        username: \"\",\n        password: \"\",\n        error: \"\",\n    }\n\n    login = async (e) => {\n        e.preventDefault();\n        // get user from db\n        let user = await getUser(this.state.username);\n        if (!user) {\n            this.setState({ error: \"invalid login\" });\n        }\n        else if (!(user.isActive || typeof user.isActive === \"undefined\")) {\n            // inactive users cant login!\n            this.setState({ error: \"This account is no longer active. Contact staff.\" });\n        }\n        else {\n            // log the user in and go home\n            let res = await loginUser(this.state.username, this.state.password);\n            if (res.error) {\n                this.setState({ error: res.error });\n            }\n            else {\n                this.props.app_login(res.user);\n                this.props.history.push('/');\n            }\n        }\n    }\n\n    changeForm = (e) => {\n        let propName = e.target.name;\n        let propValue = e.target.value;\n        let state = { ...this.state };\n        state[propName] = propValue;\n        this.setState(state);\n    }\n\n    render() {\n        const classes = {\n            paper: {\n                marginTop: \"10px\",\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n            },\n            form: {\n                width: '100%',\n                marginTop: \"10px\",\n            },\n            submit: {\n                margin: \"10px\",\n            },\n        };\n        let alert = this.state.error ? <Alert severity=\"error\">{this.state.error}</Alert> : \"\";\n\n        return (\n            <Container component=\"main\" maxWidth=\"xs\">\n                <div style={classes.paper}>\n                    <Avatar />\n                    <Typography component=\"h1\" variant=\"h5\">Login</Typography>\n                    <form style={classes.form} noValidate>\n                        <TextField\n                            variant=\"outlined\"\n                            margin=\"normal\"\n                            required\n                            fullWidth\n                            id=\"username\"\n                            label=\"Username\"\n                            name=\"username\"\n                            autoComplete=\"username\"\n                            autoFocus\n                            onChange={this.changeForm}\n                            value={this.state.username}\n                        />\n                        <TextField\n                            variant=\"outlined\"\n                            margin=\"normal\"\n                            required\n                            fullWidth\n                            name=\"password\"\n                            label=\"Password\"\n                            type=\"password\"\n                            id=\"password\"\n                            autoComplete=\"current-password\"\n                            onChange={this.changeForm}\n                            value={this.state.password}\n                        />\n\n                        <Button\n                            type=\"submit\"\n                            fullWidth\n                            variant=\"contained\"\n                            color=\"primary\"\n                            style={classes.submit}\n                            onClick={this.login}>\n                            Log In\n                        </Button>\n                        <Grid container justify=\"center\">\n                            <Link href=\"/register\">\n                                {\"Don't have an account? Sign Up\"}\n                            </Link>\n                        </Grid>\n                    </form>\n                    {alert}\n                </div>\n            </Container>\n        );\n    }\n}\n\nconst mapState = (state) => { return { user: state.user } };\nconst mapDispatch = { app_login };\n\nexport default connect(mapState, mapDispatch)(Login);"]},"metadata":{},"sourceType":"module"}